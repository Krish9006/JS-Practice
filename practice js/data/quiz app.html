<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz App</title>
  <style>
    #quizbox { font-family: sans-serif; max-width: 500px; margin: auto; padding: 20px; }
    .option-label { display: block; margin: 10px 0; }
    #timer { font-weight: bold; margin-bottom: 10px; color: green; }
  </style>
</head>
<body>

<h1>Quiz App</h1>
<div id="quizbox">
  <div id="timer">Time Left: 10</div>
  <div id="questionbox"></div>
  <div id="optionbox"></div>
  <button id="next-button">Next</button>
</div>
<div id="result" style="display:none; text-align:center;"></div>

<script>

let current = 0;
let score = 0;
let questions = [];
let selected = null;
let timerInterval;
let timeLeft = 10;

fetch('questions.json')
  .then(res => res.json())
  .then(data => {
    questions = data;
    showQuestion();
    startTimer();
  });

function showQuestion() {
  clearInterval(timerInterval);
  timeLeft = 10;
  document.getElementById("timer").innerText = `Time Left: ${timeLeft}`;
  document.getElementById("questionbox").innerText = `Q${current + 1}: ${questions[current].question}`;

  const optionBox = document.getElementById("optionbox");
  optionBox.innerHTML = "";

  questions[current].options.forEach((opt, i) => {
    const label = document.createElement("label");
    label.classList.add("option-label");
    label.innerHTML = `<input type="radio" name="option" value="${i}"> ${opt}`;
    optionBox.appendChild(label);
  });

  startTimer();
}

function startTimer() {
  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = `Time Left: ${timeLeft}`;
    if (timeLeft === 0) {
      clearInterval(timerInterval);
      handleNext();
    }
  }, 1000);
}

document.getElementById("next-button").addEventListener("click", handleNext);

function handleNext() {
  clearInterval(timerInterval);
  const selectedOption = document.querySelector('input[name="option"]:checked');
  if (selectedOption && parseInt(selectedOption.value) === questions[current].answer) {
    score++;
  }

  current++;
  if (current < questions.length) {
    showQuestion();
  } else {
    showResult();
  }
}

function showResult() {
  document.getElementById("quizbox").style.display = "none";
  document.getElementById("result").style.display = "block";
  document.getElementById("result").innerHTML = `<h2>Your Score: ${score}/${questions.length}</h2>`;
}
</script>

</body>
</html>
